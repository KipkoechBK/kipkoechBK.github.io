<script>
document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('certificates-container');
    
    // Show loading state
    container.innerHTML = '<p id="loading">Loading certificates...</p>';

    fetch('certificates.json')
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            if (!data.certificates || !Array.isArray(data.certificates)) {
                throw new Error('Invalid JSON structure');
            }

            container.innerHTML = '';
            
            data.certificates.forEach(cert => {
                if (!cert.title || !cert.issuer) {
                    console.warn('Incomplete certificate:', cert);
                    return;
                }
                
                const certHTML = `
                    <div class="certificate">
                        <h2>${cert.title}</h2>
                        <p>Issued by: ${cert.issuer}</p>
                        ${cert.date ? `<p class="date">${cert.date}</p>` : ''}
                        <a href="${cert.file || '#'}" target="_blank">View Certificate</a>
                    </div>
                `;
                container.innerHTML += certHTML;
            });
        })
        .catch(error => {
            console.error('Fetch error:', error);
            container.innerHTML = `
                <div class="error">
                    <p>⚠️ Error loading certificates</p>
                    <small>${error.message}</small>
                    <p>Please check:</p>
                    <ul>
                        <li>certificates.json exists</li>
                        <li>JSON format is valid</li>
                    </ul>
                </div>
            `;
        });
});
</script>
